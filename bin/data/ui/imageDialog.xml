<imageDialog externFile="(@ui)/presets.xml" importedNode="panel" draggable="1">
	<area x="0" y="0" w="400" h="220" xRef="1" yRef="1" />
	
	<content>
		<filePrompt type="text" text="File path:" x_left="12" y_top="48" fontId="smallFont" />
		<areaPropmt type="text" text="Image portion (x,y,w,h):" x_left="12" y_top="108" fontId="smallFont" />
	</content>
	
	<children>
		<filePath externFile="(@ui)/presets.xml" importedNode="input">
			<area x="12" y="68" w="376" h="24" />
		</filePath>
		
		<areaX externFile="(@ui)/presets.xml" importedNode="input">
			<area x="12" y="128" w="85" h="24" />
		</areaX>
		
		<areaY externFile="(@ui)/presets.xml" importedNode="input">
			<area x="109" y="128" w="85" h="24" />
		</areaY>
		
		<areaW externFile="(@ui)/presets.xml" importedNode="input">
			<area x="206" y="128" w="85" h="24" />
		</areaW>
		
		<areaH externFile="(@ui)/presets.xml" importedNode="input">
			<area x="303" y="128" w="85" h="24" />
		</areaH>
		
		<ok externFile="(@ui)/presets.xml" importedNode="button_small">
			<area x="12" y="12" w="96" h="32" xRef="2" yRef="2" />
			
			<content>
				<text type="text" text="OK" x_centre="0" y_centre="0" fontId="smallFont" />
			</content>
			
			<event type="onMouseUp"><script>
				importScript("(@script)/dialogs.js");
				
				var image;
				
				image.file = caller.parent.filePath.content.text.text;
				image.area.x = strtoi(caller.parent.areaX.content.text.text);
				image.area.y = strtoi(caller.parent.areaY.content.text.text);
				image.area.w = strtoi(caller.parent.areaW.content.text.text);
				image.area.h = strtoi(caller.parent.areaH.content.text.text);
				
				dialogReturn(caller.parent, image);
			</script></event>
		</ok>
		
		<preview externFile="(@ui)/presets.xml" importedNode="button_small">
			<area x="0" y="12" w="85" h="32" xRef="1" yRef="2" />
			
			<content>
				<text type="text" text="Preview" x_centre="0" y_centre="0" fontId="smallFont" />
			</content>
			
			<event type="onMouseUp"><script>
				importScript("(@script)/dialogs.js");
				
				var image;
				
				image.file = caller.parent.filePath.content.text.text;
				image.area.x = strtoi(caller.parent.areaX.content.text.text);
				image.area.y = strtoi(caller.parent.areaY.content.text.text);
				image.area.w = strtoi(caller.parent.areaW.content.text.text);
				image.area.h = strtoi(caller.parent.areaH.content.text.text);
				
				imageViewerDialog(caller.parent, image, "");
			</script></event>
		</preview>
		
		<cancel externFile="(@ui)/presets.xml" importedNode="button_small">
			<area x="12" y="12" w="96" h="32" xRef="0" yRef="2" />
			
			<content>
				<text type="text" text="Cancel" x_centre="0" y_centre="0" fontId="smallFont" />
			</content>
			
			<event type="onMouseUp"><script>
				importScript("(@script)/dialogs.js");
				dialogReturn(caller.parent, undefined);
			</script></event>
		</cancel>
	</children>
	
	<event type="prePrint"><script>
		dark();
	</script></event>
	
	<event type="onKeyDown"><script>
		if (event.key == key_enter) 
			caller.ok.triggerEvent("onMouseUp");
		
		if (event.key == key_escape) 
			caller.cancel.triggerEvent("onMouseUp");
	</script></event>
</imageDialog>
